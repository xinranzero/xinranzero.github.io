<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>【Java基础】特殊文本文件、日志技术 | xinranzero</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="特殊文件概述认识  普通文件.txt。 属性文件.properties。 XML文件.xml。  为什么要用特殊文件？  存储多个用户的用户名和密码，txt不可以解析，但是properties、xml可以。 存储多个用户的用户名、密码、家乡和性别，txt、properties不可以解析，xml可以。 可以存储有关系的数据，作为系统的配置文件，作为信息进行传输。  我们主要学什么？  了解它们的特点">
<meta property="og:type" content="article">
<meta property="og:title" content="【Java基础】特殊文本文件、日志技术">
<meta property="og:url" content="http://xinranzero.com/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/index.html">
<meta property="og:site_name" content="xinranzero">
<meta property="og:description" content="特殊文件概述认识  普通文件.txt。 属性文件.properties。 XML文件.xml。  为什么要用特殊文件？  存储多个用户的用户名和密码，txt不可以解析，但是properties、xml可以。 存储多个用户的用户名、密码、家乡和性别，txt、properties不可以解析，xml可以。 可以存储有关系的数据，作为系统的配置文件，作为信息进行传输。  我们主要学什么？  了解它们的特点">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://xinranzero.com/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668045955362.png">
<meta property="og:image" content="http://xinranzero.com/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668046078574.png">
<meta property="og:image" content="http://xinranzero.com/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668046216355.png">
<meta property="article:published_time" content="2024-04-08T07:10:11.000Z">
<meta property="article:modified_time" content="2024-04-08T12:24:47.980Z">
<meta property="article:author" content="Rong Zhao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xinranzero.com/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668045955362.png">
  
    <link rel="alternate" href="/atom.xml" title="xinranzero" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">xinranzero</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://xinranzero.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-【Java基础】特殊文本文件、日志技术" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/" class="article-date">
  <time class="dt-published" datetime="2024-04-08T07:10:11.000Z" itemprop="datePublished">2024-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      【Java基础】特殊文本文件、日志技术
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="特殊文件概述"><a href="#特殊文件概述" class="headerlink" title="特殊文件概述"></a>特殊文件概述</h1><p>认识</p>
<ul>
<li>普通文件.txt。</li>
<li>属性文件.properties。</li>
<li>XML文件.xml。</li>
</ul>
<p>为什么要用特殊文件？</p>
<ul>
<li>存储多个用户的用户名和密码，txt不可以解析，但是properties、xml可以。</li>
<li>存储多个用户的用户名、密码、家乡和性别，txt、properties不可以解析，xml可以。</li>
<li>可以存储有关系的数据，作为<strong>系统的配置文件</strong>，<strong>作为信息进行传输</strong>。</li>
</ul>
<p>我们主要学什么？</p>
<ul>
<li>了解它们的特点、作用。</li>
<li>学习使用程序读取它们里面的数据。</li>
<li>学习使用程序把数据存储到这些文件里。（用得不多。）</li>
</ul>
<h1 id="日志技术"><a href="#日志技术" class="headerlink" title="日志技术"></a>日志技术</h1><p>把程序运行的信息，记录到文件中，方便程序员定位bug、并了解程序的执行情况等。</p>
<h1 id="特殊文件：properties属性文件"><a href="#特殊文件：properties属性文件" class="headerlink" title="特殊文件：properties属性文件"></a>特殊文件：properties属性文件</h1><ul>
<li>是一个<strong>Map集合</strong>（<strong>键值对集合</strong>），但是我们<strong>一般不会当集合使用</strong>。</li>
<li>核心作用：Properties是用来代表属性文件的，通过Properties可以读写属性文件里的键值对。</li>
</ul>
<h2 id="（读）构造器"><a href="#（读）构造器" class="headerlink" title="（读）构造器"></a>（读）构造器</h2><ol>
<li>public Properties()。用于构建Properties集合对象（空容器）。</li>
</ol>
<h2 id="（读）常用方法"><a href="#（读）常用方法" class="headerlink" title="（读）常用方法"></a>（读）常用方法</h2><ol>
<li>public void load(InputStream is)。通过字节输入流，读取属性文件里的键值对数据。</li>
<li>public void load(Reader reader)。通过字符输入流，读取属性文件里的键值对数据。</li>
<li>public String getProperty(String key)。根据键获取值(其实就是get方法的效果)。</li>
<li>public Set<String> stringPropertyNames()。获取全部键的集合（其实就是ketSet方法的效果）。</String></li>
</ol>
<p>读取步骤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、创建一个Properties的对象出来（键值对集合，空容器）</span><br><span class="line"><span class="number">2</span>、调用load(字符输入流/字节输入流)方法，开始加载属性文件中的键值对数据到properties对象中去</span><br><span class="line"><span class="number">3</span>、调用getProperty(键)方法，根据键取值</span><br></pre></td></tr></table></figure>

<p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 目标：掌握使用Properties类读取属性文件中的键值对信息。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertiesTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建一个Properties的对象出来（键值对集合，空容器）</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        System.out.println(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、开始加载属性文件中的键值对数据到properties对象中去</span></span><br><span class="line">        properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;properties-xml-log-app\\src\\users.properties&quot;</span>));</span><br><span class="line">        System.out.println(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、根据键取值</span></span><br><span class="line">        System.out.println(properties.getProperty(<span class="string">&quot;赵敏&quot;</span>));</span><br><span class="line">        System.out.println(properties.getProperty(<span class="string">&quot;张无忌&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4、遍历全部的键和值。</span></span><br><span class="line">        <span class="comment">//获取键的集合</span></span><br><span class="line">        Set&lt;String&gt; keys = properties.stringPropertyNames();</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="comment">//再根据键获取值</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> properties.getProperty(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;----&gt;&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">        properties.forEach((k, v) -&gt; &#123;</span><br><span class="line">            System.out.println(k + <span class="string">&quot;----&gt;&quot;</span> + v);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="（写）构造器"><a href="#（写）构造器" class="headerlink" title="（写）构造器"></a>（写）构造器</h2><ol>
<li>public Properties()。用于构建Properties集合对象（空容器）。</li>
</ol>
<h2 id="（写）常用方法"><a href="#（写）常用方法" class="headerlink" title="（写）常用方法"></a>（写）常用方法</h2><ol>
<li>public Object setProperty(String key, String value)。保存键值对数据到Properties对象中去。</li>
<li>public void store(OutputStream os, String comments)。把键值对数据，通过字节输出流写出到属性文件里去。注意这里需要写评论信息。</li>
<li>public void store(Writer w, String comments)。把键值对数据，通过字符输出流写出到属性文件里去。</li>
</ol>
<p>步骤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、先准备一个.properties属性文件，按照格式写几个键值对</span><br><span class="line"><span class="number">1</span>、创建Properties对象出来，</span><br><span class="line"><span class="number">2</span>、调用setProperty存储一些键值对数据</span><br><span class="line"><span class="number">3</span>、调用store(字符输出流/字节输出流, 注释)，将Properties集合中的键和值写到文件中</span><br><span class="line">	注意：第二个参数是注释，必须得加；</span><br></pre></td></tr></table></figure>

<p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertiesTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建Properties对象出来，先用它存储一些键值对数据</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;minmin&quot;</span>);</span><br><span class="line">        properties.setProperty(<span class="string">&quot;殷素素&quot;</span>, <span class="string">&quot;cuishan&quot;</span>);</span><br><span class="line">        properties.setProperty(<span class="string">&quot;张翠山&quot;</span>, <span class="string">&quot;susu&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、把properties对象中的键值对数据存入到属性文件中去</span></span><br><span class="line">        properties.store(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;properties-xml-log-app/src/users2.properties&quot;</span>)</span><br><span class="line">                         , <span class="string">&quot;i saved many users!&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="特殊文件：XML文件"><a href="#特殊文件：XML文件" class="headerlink" title="特殊文件：XML文件"></a>特殊文件：XML文件</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>是什么？</p>
<ul>
<li>XML（ 全称EXtensible Markup Language， <strong>可扩展标记语言</strong> ）。</li>
<li>本质是一种数据的格式，可以用来存储复杂的数据结构，和数据关系。</li>
</ul>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>XML中的<strong>“&lt;标签名&gt;” 称为一个标签或一个元素</strong>，一般是<strong>成对出现</strong>的。</li>
<li>XML中的<strong>标签名可以自己定义</strong>（可扩展），但<strong>必须要正确的嵌套</strong>。</li>
<li>XML中<strong>只能有一个根标签</strong>。</li>
<li>XML中的标签<strong>可以有属性</strong>。</li>
<li>如果一个文件中放置的是XML格式的数据，这个文件就是XML文件，后缀一般要写成**.xml**。</li>
</ul>
<h3 id="XML的创建"><a href="#XML的创建" class="headerlink" title="XML的创建"></a>XML的创建</h3><ul>
<li>就是创建一个XML类型的文件，要求文件的后缀必须使用xml，如hello_world.xml。</li>
</ul>
<h3 id="语法规则"><a href="#语法规则" class="headerlink" title="语法规则"></a>语法规则</h3><ul>
<li>(1)XML文件的后缀名为：xml，文档声明（抬头）<strong>必须是第一行</strong>。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> &gt; //自动</span></span><br><span class="line"><span class="meta">    version：XML默认的版本号码、该属性是必须存在</span></span><br><span class="line"><span class="meta">    encoding：本XML文件的编码</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>(2)XML中可以定义注释信息：<!--- 注释内容 --></p>
</li>
<li><p>(3)<strong>根标签<xx>有且只能有一个</xx></strong>。下面可以写子标签，子标签里面可以存属性，例如id&#x3D;”1”。再往下可以继续写子标签。</p>
</li>
<li><p>(4)标签必须承成对出现，又开始有结束： <name></name>。</p>
</li>
<li><p>(5)必须能够正确的嵌套。</p>
</li>
<li><p>XML中书写“&lt;”、“&amp;”等，可能会出现冲突，导致报错，此时可以用如下特殊字符替代。注意，XML可以在浏览器中直接渲染，在IDEA里面右键-open in expolrer（将这些特殊字符转换完成）。</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">&amp;lt;</span>    &lt;  小于</span><br><span class="line"><span class="symbol">&amp;gt;</span>    &gt;  大于</span><br><span class="line"><span class="symbol">&amp;amp;</span>   &amp;  和号</span><br><span class="line"><span class="symbol">&amp;apos;</span>  &#x27;  单引号</span><br><span class="line"><span class="symbol">&amp;quot;</span>  &quot;  引号</span><br><span class="line">例如：<span class="tag">&lt;<span class="name">data</span>&gt;</span> 3 <span class="symbol">&amp;lt;</span> 2 <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> 5 <span class="symbol">&amp;gt;</span> 4 <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>XML中可以写一个叫<strong>CDATA的特殊数据区</strong>: <!--[CDATA[   …内容…  ]]-->，<strong>里面的内容可以随便写</strong>。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data1</span>&gt;</span></span><br><span class="line">    &lt;![CDATA[</span><br><span class="line">   		3 &lt; 2 &amp;&amp; 5 &gt; 4</span><br><span class="line">    ]]&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">data1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>例子</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注释：以上抬头声明必须放在第一行，必须有 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  根标签只能有一个 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">users</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;第一个用户&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>张无忌<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>男<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">地址</span>&gt;</span>光明顶<span class="tag">&lt;/<span class="name">地址</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>minmin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">people</span>&gt;</span>很多人<span class="tag">&lt;/<span class="name">people</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>敏敏<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>女<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">地址</span>&gt;</span>光明顶<span class="tag">&lt;/<span class="name">地址</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>wuji<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">users</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="作用和应用场景"><a href="#作用和应用场景" class="headerlink" title="作用和应用场景"></a>作用和应用场景</h3><ul>
<li>本质是一种数据格式，可以<strong>存储</strong>复杂的数据结构，和数据关系。</li>
<li>应用场景：经常用来做为<strong>系统的配置文件</strong>；或者作为一种特殊的数据结构，<strong>在网络中进行传输</strong>（现在用得不多但是也能作为一种方案）。</li>
</ul>
<h2 id="读取XML文件中的数据"><a href="#读取XML文件中的数据" class="headerlink" title="读取XML文件中的数据"></a>读取XML文件中的数据</h2><p>又叫，解析XML文件。使用程序读取XML文件中的数据。</p>
<ul>
<li>注意：程序员并不需要自己写原始的IO流代码来解析XML，难度较大！也相当繁琐！</li>
<li>其实，有很多开源的，好用的，解析XML的框架，最知名的是：<strong>Dom4j</strong>(第三方研发的)。</li>
</ul>
<h3 id="Dom4j下载"><a href="#Dom4j下载" class="headerlink" title="Dom4j下载"></a><strong>Dom4j</strong>下载</h3><ol>
<li>下载Dom4j框架，官网下载。</li>
<li>在项目中创建一个文件夹：lib。</li>
<li>将dom4j-2.1.3.jar文件复制到 lib 文件夹。</li>
<li>在jar文件上点右键，选择 Add as Library -&gt; 点击OK。</li>
<li>在类中导包使用。</li>
</ol>
<h3 id="DOM4J解析XML文件的思想：文档对象模型"><a href="#DOM4J解析XML文件的思想：文档对象模型" class="headerlink" title="DOM4J解析XML文件的思想：文档对象模型"></a>DOM4J解析XML文件的思想：文档对象模型</h3><p>思想</p>
<ol>
<li>首先用SAXReader解析器把文件内容一下子加载到内存中，变成一个Document（整个文档）对象。</li>
<li>通过Document对象就可以获取Element对象：元素（标签）。</li>
<li>Element又可以获取Attribute：属性、子元素、文本。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">users</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>张无忌<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>男<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">地址</span>&gt;</span>光明顶<span class="tag">&lt;/<span class="name">地址</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>minmin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">data</span>&gt;</span> 3 <span class="symbol">&amp;lt;</span> 2 <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> 5 &gt; 4 <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">data1</span>&gt;</span></span><br><span class="line">			&lt;![CDATA[</span><br><span class="line">				3 &lt; 2 &amp;&amp; 5 &gt; 4</span><br><span class="line">			]]&gt;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">data1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">user</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>敏敏<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sex</span>&gt;</span>女<span class="tag">&lt;/<span class="name">sex</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">地址</span>&gt;</span>光明顶<span class="tag">&lt;/<span class="name">地址</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">password</span>&gt;</span>wuji<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">data</span>&gt;</span> 3 <span class="symbol">&amp;lt;</span> 2 <span class="symbol">&amp;amp;</span><span class="symbol">&amp;amp;</span> 5 &gt; 4 <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">data1</span>&gt;</span></span><br><span class="line">            &lt;![CDATA[</span><br><span class="line">            	3 &lt; 2 &amp;&amp; 5 &gt; 4</span><br><span class="line">            ]]&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">data1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">users</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>构造器</p>
<ol>
<li>public SAXReader()。构建Dom4J的解析器对象。Dom4j提供的解析器，可以认为是代表整个Dom4j框架。</li>
<li>public Document read(String url)。把XML文件读成Document对象。</li>
<li>public Document read(InputStream is)。通过字节输入流读取XML文件。</li>
</ol>
<p>常用方法</p>
<ol>
<li>Element getRootElement()。获得根元素对象。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dom4JTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建一个Dom4J框架提供的解析器对象</span></span><br><span class="line">        <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、使用saxReader对象把需要解析的XML文件读成一个Document对象。</span></span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span></span><br><span class="line">                saxReader.read(<span class="string">&quot;properties-xml-log-app\\src\\helloworld.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、从文档对象中解析XML文件的全部数据了</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">root</span> <span class="operator">=</span> document.getRootElement();	<span class="comment">//获取了根元素</span></span><br><span class="line">        System.out.println(root.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Element提供的方法"><a href="#Element提供的方法" class="headerlink" title="Element提供的方法"></a>Element提供的方法</h3><p>注意，<strong>只能从根元素一级一级向下解析</strong>。</p>
<ol>
<li>public String getName()。得到元素名字。</li>
<li>public List<Element> elements()。得到当前元素下所有子元素。</Element></li>
<li>public List<Element> elements(String name)。得到当前元素下指定名字的子元素返回集合。</Element></li>
<li>public Element element(String name)。得到当前元素下指定名字的子元素，<strong>如果有很多名字相同的返回第一个</strong>。</li>
<li>public String  attributeValue(String name)。通过属性名直接得到属性值。</li>
<li>public String elementText(子元素名)。得到指定名称的子元素的文本。</li>
<li>public String getText()。得到文本。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dom4JTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1、创建一个Dom4J框架提供的解析器对象</span></span><br><span class="line">        <span class="type">SAXReader</span> <span class="variable">saxReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、使用saxReader对象把需要解析的XML文件读成一个Document对象。</span></span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span></span><br><span class="line">                saxReader.read(<span class="string">&quot;properties-xml-log-app\\src\\helloworld.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、从文档对象中解析XML文件的全部数据了</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">root</span> <span class="operator">=</span> document.getRootElement();</span><br><span class="line">        System.out.println(root.getName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4、获取根元素下的全部一级子元素。</span></span><br><span class="line">        <span class="comment">// List&lt;Element&gt; elements = root.elements();</span></span><br><span class="line">        List&lt;Element&gt; elements = root.elements(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element element : elements) &#123;</span><br><span class="line">            System.out.println(element.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5、获取当前元素下的某个子元素。</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">people</span> <span class="operator">=</span> root.element(<span class="string">&quot;people&quot;</span>);</span><br><span class="line">        System.out.println(people.getText());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果下面有很多子元素user，默认获取第一个。</span></span><br><span class="line">        <span class="type">Element</span> <span class="variable">user</span> <span class="operator">=</span> root.element(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        System.out.println(user.elementText(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6、获取元素的属性信息呢？</span></span><br><span class="line">        System.out.println(user.attributeValue(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        <span class="type">Attribute</span> <span class="variable">id</span> <span class="operator">=</span> user.attribute(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        System.out.println(id.getName());</span><br><span class="line">        System.out.println(id.getValue());</span><br><span class="line"></span><br><span class="line">        List&lt;Attribute&gt; attributes = user.attributes();</span><br><span class="line">        <span class="keyword">for</span> (Attribute attribute : attributes) &#123;</span><br><span class="line">            System.out.println(attribute.getName() + <span class="string">&quot;=&quot;</span> + attribute.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7、如何获取全部的文本内容:获取当前元素下的子元素文本值</span></span><br><span class="line">        System.out.println(user.elementText(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        System.out.println(user.elementText(<span class="string">&quot;地址&quot;</span>));</span><br><span class="line">        System.out.println(user.elementTextTrim(<span class="string">&quot;地址&quot;</span>)); <span class="comment">// 取出文本去除前后空格</span></span><br><span class="line">        System.out.println(user.elementText(<span class="string">&quot;password&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">Element</span> <span class="variable">data</span> <span class="operator">=</span> user.element(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">        System.out.println(data.getText());</span><br><span class="line">        System.out.println(data.getTextTrim()); <span class="comment">// 取出文本去除前后空格</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如何往XML文件中写入数据？</p>
<ul>
<li>DOM4J也提供了往XML文件中写标签的方法，但是用起来比较麻烦，不好维护。这里不建议使用。</li>
<li>我们<strong>自己使用StringBuilder按照标签的格式拼接，然后再使用BufferedWriter写到XML文件中</strong>去就可以了。更加灵活。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dom4JTest2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1、使用一个StringBuilder对象来拼接XML格式的数据。</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        sb.append(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot; ?&gt;\r\n&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;&lt;book&gt;\r\n&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;\t&lt;name&gt;&quot;</span>).append(<span class="string">&quot;从入门到跑路&quot;</span>).append(<span class="string">&quot;&lt;/name&gt;\r\n&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;\t&lt;author&gt;&quot;</span>).append(<span class="string">&quot;dlei&quot;</span>).append(<span class="string">&quot;&lt;/author&gt;\r\n&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;\t&lt;price&gt;&quot;</span>).append(<span class="number">999.99</span>).append(<span class="string">&quot;&lt;/price&gt;\r\n&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;&lt;/book&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;properties-xml-log-app/src/book.xml&quot;</span>));</span><br><span class="line">                )&#123;</span><br><span class="line">            bw.write(sb.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="补充知识：约束XML文件的编写-了解"><a href="#补充知识：约束XML文件的编写-了解" class="headerlink" title="补充知识：约束XML文件的编写[了解]"></a>补充知识：约束XML文件的编写[了解]</h3><p>限制XML文件中的标签或者属性，只能按照规定的格式写。</p>
<p>专门用来限制xml书写格式的文档，比如：限制标签、属性应该怎么写。有两种约束技术：</p>
<ol>
<li>DTD约束文档。（<strong>不</strong>能够约束具体的数据类型。）</li>
<li>Schame约束文档。（能够约束具体的数据类型。）</li>
</ol>
<p>案例：利用DTD约束文档，约束一个XML文件的编写。（了解）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>编写DTD约束文档，后缀必须是.dtd</span><br><span class="line"><span class="number">2.</span>在需要编写的XML文件中导入该DTD约束文档（&lt;!DOCTYPE 书架 SYSTEM <span class="string">&quot;data.dtd&quot;</span>&gt;）</span><br><span class="line"><span class="number">3.</span>然后XML文件，就必须按照DTD约束文档指定的格式进行编写，否则报错！</span><br></pre></td></tr></table></figure>

<p>代码（了解）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!ELEMENT 书架 (书+)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT 书 (书名,作者,售价)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT 书名 (<span class="keyword">#PCDATA</span>)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT 作者 (<span class="keyword">#PCDATA</span>)&gt;</span></span><br><span class="line"><span class="meta">&lt;!ELEMENT 售价 (<span class="keyword">#PCDATA</span>)&gt;</span></span><br></pre></td></tr></table></figure>

<p>案例：利用schema约束文档，约束一个XML文件的编写。（了解）</p>
<p>步骤（了解）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>编写schema约束文档，后缀必须是.xsd，具体的形式到代码中观看。</span><br><span class="line"><span class="number">2.</span>在需要编写的XML文件中导入该schema约束文档</span><br><span class="line"><span class="number">3.</span>按照约束内容编写XML文件的标签。</span><br></pre></td></tr></table></figure>

<h1 id="日志技术-1"><a href="#日志技术-1" class="headerlink" title="日志技术"></a>日志技术</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p>场景引入</p>
<ul>
<li>希望系统能记住某些数据是被谁操作的，比如被谁删除了？</li>
<li>想分析用户浏览系统的具体情况，以便挖掘用户的具体喜好？</li>
<li>当系统在开发中或者上线后出现了bug，崩溃了，该通过什么去分析、定位bug？</li>
</ul>
<p>日志</p>
<ul>
<li>好比生活中的日记，可以记录你生活中的点点滴滴。</li>
<li>程序中的日志，通常就是一个文件，里面记录的是<strong>程序运行过程中的各种信息</strong>。</li>
</ul>
<p>输出语句的弊端</p>
<ul>
<li>日志会展示在控制台。</li>
<li>不能更方便的将日志记录到其他的位置（文件，数据库）。</li>
<li>想取消日志，需要修改源代码才可以完成。</li>
</ul>
<p>日志技术</p>
<ul>
<li>可以将系统执行的信息，方便的记录到指定的位置（控制台、文件中、数据库中）。</li>
<li>可以随时以开关的形式控制日志的启停，无需侵入到源代码中去进行修改。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th><strong>输出语句</strong></th>
<th><strong>日志技术</strong></th>
</tr>
</thead>
<tbody><tr>
<td>输出位置</td>
<td>输出到控制台</td>
<td>可以将日志信息写入到文件或者数据库中</td>
</tr>
<tr>
<td>取消日志</td>
<td>需要修改代码，灵活性比较差</td>
<td>不需要修改代码，灵活性比较好</td>
</tr>
<tr>
<td>多线程</td>
<td>性能较差</td>
<td>性能较好</td>
</tr>
</tbody></table>
<h2 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h2><h3 id="日志框架"><a href="#日志框架" class="headerlink" title="日志框架"></a>日志框架</h3><ol>
<li>JUL（java.util.loggiing）。</li>
<li>Log4j。</li>
<li>Logback。</li>
<li>其他实现。</li>
</ol>
<h3 id="日志接口"><a href="#日志接口" class="headerlink" title="日志接口"></a>日志接口</h3><p>为了减轻负担，设置接口让大家都遵守。</p>
<ol>
<li>Commons Logging (JCL)。</li>
<li>Simple Logging Facade for Java (SLF4J)。</li>
</ol>
<ul>
<li>日志框架：牛人或者第三方公司已经做好的实现代码，后来者直接可以拿去使用。</li>
<li>日志接口：设计日志框架的一套标准，日志框架需要实现这些接口。</li>
<li>注意1：因为对Commons Logging接口不满意，有人就搞了SLF4J；因为对Log4j的性能不满意，有人就搞了Logback。</li>
<li>注意2：<strong>Logback是基于slf4j的日志规范实现的框架</strong>。</li>
</ul>
<h3 id="Logback日志框架"><a href="#Logback日志框架" class="headerlink" title="Logback日志框架"></a>Logback日志框架</h3><p>网站：<a target="_blank" rel="noopener" href="https://logback.qos.ch/index.html">https://logback.qos.ch/index.html</a> </p>
<p>Logback日志框架有以下几个模块：</p>
<ol>
<li>logback-core。<strong>基础模块</strong>，是其他两个模块依赖的基础（<strong>必须有</strong>）。</li>
<li>logback-classic。功能模块，<strong>完整实现了slf4j API</strong>的模块（<strong>必须有</strong>）。</li>
<li>logback-access。与 Tomcat 和 Jetty 等 Servlet 容器集成，以提供 HTTP 访问日志的功能（可选，以后再接触）。</li>
</ol>
<p>想使用Logback日志框架，至少需要在项目中整合如下三个模块：</p>
<ol>
<li>slf4j-api。日志接口。</li>
<li>logback-core。基础模块。</li>
<li>logback-classic。功能模块。</li>
</ol>
<h2 id="Logback入门"><a href="#Logback入门" class="headerlink" title="Logback入门"></a>Logback入门</h2><p>需求：使用Logback日志框架，纪录系统的运行信息。</p>
<h3 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>导入Logback框架到项目中去。</span><br><span class="line"><span class="number">2.</span>将Logback框架的核心配置文件logback.xml直接拷贝到src目录下（必须是src下）。</span><br><span class="line"><span class="number">3.</span>创建Logback框架提供的Logger对象，然后用Logger对象调用其提供的方法就可以记录系统的日志信息。</span><br><span class="line">创建一个日志记录日对象：</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(“类名<span class="string">&quot;);</span></span><br></pre></td></tr></table></figure>

<h3 id="具体步骤"><a href="#具体步骤" class="headerlink" title="具体步骤"></a>具体步骤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在项目下新建文件夹lib，导入Logback的相关jar包到该文件夹下，并添加到项目库中去。</span><br><span class="line"><span class="number">2.</span>必须将Logback的核心配置文件logback.xml直接拷贝到src目录下。</span><br><span class="line"><span class="number">3.</span>在代码中获取日志的对象</span><br><span class="line"><span class="number">4.</span>调用日志对象的方法记录日志信息</span><br></pre></td></tr></table></figure>

<p>代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogBackTest</span> &#123;</span><br><span class="line">    <span class="comment">// 创建一个Logger日志对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;LogBackTest&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//while (true) &#123;</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                LOGGER.info(<span class="string">&quot;chu法方法开始执行~~~&quot;</span>);</span><br><span class="line">                chu(<span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">                LOGGER.info(<span class="string">&quot;chu法方法执行成功~~~&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                LOGGER.error(<span class="string">&quot;chu法方法执行失败了，出现了bug~~~&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">chu</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;</span><br><span class="line">        LOGGER.debug(<span class="string">&quot;参数a:&quot;</span> + a);</span><br><span class="line">        LOGGER.debug(<span class="string">&quot;参数b:&quot;</span> + b);</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a / b;</span><br><span class="line">        LOGGER.info(<span class="string">&quot;结果是：&quot;</span> + c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Logback-xml日志配置文件"><a href="#Logback-xml日志配置文件" class="headerlink" title="Logback.xml日志配置文件"></a>Logback.xml日志配置文件</h2><p>核心配置文件logback.xml，<strong>对Logback日志框架进行控制</strong>的。在记录日志时会读取配置文件中的配置信息，从而记录日志的形式。</p>
<p>具体可以做哪些<strong>配置</strong>？</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. 可以配置日志输出的位置是文件、还是控制台。</span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">2. 可以配置日志输出的格式。</span><br><span class="line">3. 还可以配置日志关闭和开启、以及哪些日志输出哪些日志不输出。// 设置为 “ALL”或“OFF”。//设置只输出到配置文件或者控制台，可以删掉其中一行。</span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;ALL&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如下图所示，控制日志往文件中输出，还是往控制台输出**</li>
</ul>
<p><img src="/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668045955362.png" alt="1668045955362"></p>
<ul>
<li><strong>如下图所示，控制打开和关闭日志</strong></li>
</ul>
<p><img src="/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668046078574.png" alt="1668046078574"></p>
<ul>
<li><p><strong>如下图所示，控制日志的输出的格式</strong></p>
<p>日志格式是由一些特殊的符号组成，可以根据需要删减不想看到的部分。比如不想看到线程名那就不要[%thread]。但是不建议同学们更改这些格式，因为这些都是日志很基本的信息。</p>
</li>
</ul>
<p><img src="/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/1668046216355.png" alt="1668046216355"></p>
<h2 id="Logback设置日志级别【重要】"><a href="#Logback设置日志级别【重要】" class="headerlink" title="Logback设置日志级别【重要】"></a>Logback设置日志级别【重要】</h2><h3 id="认识日志级别"><a href="#认识日志级别" class="headerlink" title="认识日志级别"></a>认识日志级别</h3><p>日志级别指的是日志信息的类型，日志都会分级别，常见的日志级别如下（优先级依次升高）：</p>
<table>
<thead>
<tr>
<th><strong>日志级别</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>trace</td>
<td>追踪，指明程序运行轨迹</td>
</tr>
<tr>
<td>debug</td>
<td>调试，实际应用中一般将其作为最低级别，而 trace 则很少使用</td>
</tr>
<tr>
<td>info</td>
<td>输出重要的运行信息，数据连接、网络连接、IO操作等等，使用较多</td>
</tr>
<tr>
<td>warn</td>
<td>警告信息，可能会发生问题，使用较多</td>
</tr>
<tr>
<td>error</td>
<td>错误信息, 使用较多</td>
</tr>
</tbody></table>
<h3 id="日志级别的作用"><a href="#日志级别的作用" class="headerlink" title="日志级别的作用"></a>日志级别的作用</h3><p>用于<strong>控制系统中哪些日志级别是可以输出的</strong>。</p>
<h3 id="如何设置日志级别"><a href="#如何设置日志级别" class="headerlink" title="如何设置日志级别"></a>如何设置日志级别</h3><p>可以在配置文件中书写日志级别：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">“info</span>&quot;&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>只有日志的级别是<strong>大于或等于</strong>核心配置文件配置的日志级别，<strong>才会被记录</strong>，否则不记录。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xinranzero.com/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/" data-id="cluqm6gm80000gcuh4guh74cp" data-title="【Java基础】特殊文本文件、日志技术" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2024/04/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E3%80%90java-io%E3%80%91io%E6%B5%81/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">【Java基础】java.io包下的常用API-io流</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/04/08/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E7%89%B9%E6%AE%8A%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%81%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF/">【Java基础】特殊文本文件、日志技术</a>
          </li>
        
          <li>
            <a href="/2024/04/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E3%80%90java-io%E3%80%91io%E6%B5%81/">【Java基础】java.io包下的常用API-io流</a>
          </li>
        
          <li>
            <a href="/2024/04/06/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%91%E3%80%90java.util%E3%80%91%E9%9B%86%E5%90%88%EF%BC%88Map%E3%80%81Stream%E6%B5%81%EF%BC%89/">【Java基础】集合（Map、Stream流）</a>
          </li>
        
          <li>
            <a href="/2024/04/06/%E3%80%90%E8%B5%84%E6%BA%90%E5%B8%96%E3%80%91%E5%AD%A6%E4%B9%A0Java%E5%92%8C%E7%AE%97%E6%B3%95/">【资源帖】学习Java和算法</a>
          </li>
        
          <li>
            <a href="/2024/04/05/%E3%80%90%E4%BC%B4%E8%A1%8C%E9%9D%92%E5%B9%B4%E3%80%91%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%80%E4%BB%BD%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E6%A0%A1%E6%8B%9B%E7%AE%80%E5%8E%86/">【伴行青年】如何写一份受欢迎的校招简历</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Rong Zhao<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>